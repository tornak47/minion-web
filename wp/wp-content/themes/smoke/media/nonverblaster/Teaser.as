package nonverblaster {	import flash.display.*;	import flash.net.*;	import flash.events.*;	import flash.geom.*;	import flash.system.*;	import flash.utils.*;		public class Teaser extends MovieClip{				private var urlReq			:URLRequest;		private var photo			:Bitmap = new Bitmap();		private var loader			:Loader = new Loader();				private var main			:MovieClip;				public var hasImage			:Boolean = false;		private var bitmapData		:BitmapData;		private var loaderContext	:LoaderContext = new LoaderContext();						public function Teaser(){			mouseEnabled = false;		}		public function init($main){			this.main = $main;		}		public function loadPic(url){			if(url != ""){				loaderContext.checkPolicyFile = true;				loader.contentLoaderInfo.addEventListener(Event.COMPLETE, completeHandler);				loader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, errorHandler);				urlReq = new URLRequest(url);				loader.load(urlReq, loaderContext);			} else {				activatePlayer();			}		}		private function completeHandler(e:Event){			try {				printBitmap(e.target.content.bitmapData);			} catch (e:Error){				addChild(loader);			};			hasImage = true;			activatePlayer();		}		private function errorHandler(e:Event){			//main.showError("No image was found here: \n" + Glo.bal.teaserURL);			activatePlayer();		}		private function printBitmap(photoData:BitmapData){			photo.bitmapData = new BitmapData(photoData.width, photoData.height);			photo.bitmapData.copyPixels(photoData, new Rectangle(0, 0, photo.width, photo.height), new Point(0, 0));			photo.smoothing = true;			this.addChild(photo);		}		private function activatePlayer(){			main.fitToScreen(null);			main.visible = true;		}	}}